<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>patterns · i was here</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0b;
            overflow: hidden;
            font-family: 'Courier New', monospace;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
        }

        .ui {
            position: fixed;
            z-index: 100;
            font-size: 0.7rem;
            color: #3a3a3a;
            pointer-events: none;
            mix-blend-mode: difference;
        }

        .title {
            top: 20px;
            left: 20px;
        }

        .title h1 {
            color: #fff;
            font-size: 0.9rem;
            font-weight: normal;
        }

        .back {
            top: 20px;
            right: 20px;
            pointer-events: auto;
        }

        .back a {
            color: #666;
            text-decoration: none;
        }

        .back a:hover {
            color: #fff;
        }

        .pattern-name {
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-size: 0.8rem;
            letter-spacing: 0.3em;
        }

        .controls {
            bottom: 20px;
            right: 20px;
            pointer-events: auto;
            text-align: right;
        }

        .controls span {
            color: #666;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="ui title">
        <h1>patterns</h1>
    </div>

    <div class="ui back">
        <a href="../index.html">←</a>
    </div>

    <div class="ui pattern-name" id="patternName">SPIRAL</div>

    <div class="ui controls">
        <span>[1-6]</span> change pattern<br>
        <span>[space]</span> pause<br>
        <span>[+/-]</span> speed
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const patternNameEl = document.getElementById('patternName');

        let width, height;
        let time = 0;
        let speed = 1;
        let paused = false;
        let currentPattern = 0;

        const patterns = [
            {
                name: 'SPIRAL',
                draw: () => {
                    const centerX = width / 2;
                    const centerY = height / 2;

                    for (let i = 0; i < 500; i++) {
                        const angle = i * 0.1 + time * 0.5;
                        const radius = i * 0.8;
                        const x = centerX + Math.cos(angle) * radius;
                        const y = centerY + Math.sin(angle) * radius;

                        const hue = (i + time * 50) % 360;
                        const size = 2 + Math.sin(i * 0.05 + time) * 1.5;

                        ctx.beginPath();
                        ctx.arc(x, y, size, 0, Math.PI * 2);
                        ctx.fillStyle = `hsla(${hue}, 60%, 50%, 0.8)`;
                        ctx.fill();
                    }
                }
            },
            {
                name: 'WAVES',
                draw: () => {
                    const waveCount = 12;
                    for (let w = 0; w < waveCount; w++) {
                        ctx.beginPath();
                        for (let x = 0; x <= width; x += 3) {
                            const baseY = height / 2 + (w - waveCount/2) * 40;
                            const y = baseY +
                                Math.sin(x * 0.01 + time + w * 0.5) * 30 +
                                Math.sin(x * 0.02 + time * 1.5) * 15;

                            if (x === 0) ctx.moveTo(x, y);
                            else ctx.lineTo(x, y);
                        }
                        const hue = (150 + w * 15 + time * 20) % 360;
                        ctx.strokeStyle = `hsla(${hue}, 70%, 50%, 0.6)`;
                        ctx.lineWidth = 2;
                        ctx.stroke();
                    }
                }
            },
            {
                name: 'GRID',
                draw: () => {
                    const cellSize = 40;
                    const cols = Math.ceil(width / cellSize) + 1;
                    const rows = Math.ceil(height / cellSize) + 1;

                    for (let i = 0; i < cols; i++) {
                        for (let j = 0; j < rows; j++) {
                            const x = i * cellSize;
                            const y = j * cellSize;

                            const dist = Math.sqrt(
                                Math.pow(x - width/2, 2) +
                                Math.pow(y - height/2, 2)
                            );

                            const wave = Math.sin(dist * 0.02 - time * 2);
                            const size = 5 + wave * 10;
                            const rotation = time + dist * 0.01;

                            ctx.save();
                            ctx.translate(x, y);
                            ctx.rotate(rotation);

                            const hue = (dist * 0.3 + time * 30) % 360;
                            ctx.fillStyle = `hsla(${hue}, 60%, 50%, ${0.3 + wave * 0.3})`;

                            ctx.fillRect(-size/2, -size/2, size, size);
                            ctx.restore();
                        }
                    }
                }
            },
            {
                name: 'CIRCLES',
                draw: () => {
                    const centerX = width / 2;
                    const centerY = height / 2;

                    for (let i = 0; i < 30; i++) {
                        const radius = 20 + i * 20;
                        const wave = Math.sin(time + i * 0.3);

                        ctx.beginPath();
                        ctx.arc(centerX, centerY, radius + wave * 10, 0, Math.PI * 2);

                        const hue = (i * 12 + time * 30) % 360;
                        ctx.strokeStyle = `hsla(${hue}, 70%, 50%, ${0.8 - i * 0.02})`;
                        ctx.lineWidth = 2 + wave;
                        ctx.stroke();
                    }
                }
            },
            {
                name: 'LISSAJOUS',
                draw: () => {
                    const centerX = width / 2;
                    const centerY = height / 2;

                    for (let curve = 0; curve < 5; curve++) {
                        ctx.beginPath();
                        const a = 3 + curve;
                        const b = 2 + curve * 0.5;
                        const delta = time + curve * 0.5;

                        for (let t = 0; t < Math.PI * 2; t += 0.01) {
                            const x = centerX + Math.sin(a * t + delta) * (150 + curve * 30);
                            const y = centerY + Math.sin(b * t) * (150 + curve * 30);

                            if (t === 0) ctx.moveTo(x, y);
                            else ctx.lineTo(x, y);
                        }

                        const hue = (curve * 60 + time * 30) % 360;
                        ctx.strokeStyle = `hsla(${hue}, 70%, 50%, 0.6)`;
                        ctx.lineWidth = 2;
                        ctx.stroke();
                    }
                }
            },
            {
                name: 'FLOW',
                draw: () => {
                    const resolution = 20;
                    const cols = Math.ceil(width / resolution);
                    const rows = Math.ceil(height / resolution);

                    for (let i = 0; i < cols; i++) {
                        for (let j = 0; j < rows; j++) {
                            const x = i * resolution + resolution / 2;
                            const y = j * resolution + resolution / 2;

                            // Flow field angle
                            const angle =
                                Math.sin(x * 0.01 + time) *
                                Math.cos(y * 0.01 + time * 0.7) *
                                Math.PI * 2;

                            const length = 10 + Math.sin(x * 0.02 + y * 0.02 + time) * 5;

                            ctx.beginPath();
                            ctx.moveTo(x, y);
                            ctx.lineTo(
                                x + Math.cos(angle) * length,
                                y + Math.sin(angle) * length
                            );

                            const hue = (angle / Math.PI * 180 + 180 + time * 30) % 360;
                            ctx.strokeStyle = `hsla(${hue}, 60%, 50%, 0.7)`;
                            ctx.lineWidth = 1.5;
                            ctx.stroke();

                            // Arrow head
                            ctx.beginPath();
                            ctx.arc(
                                x + Math.cos(angle) * length,
                                y + Math.sin(angle) * length,
                                2, 0, Math.PI * 2
                            );
                            ctx.fillStyle = `hsla(${hue}, 60%, 50%, 0.9)`;
                            ctx.fill();
                        }
                    }
                }
            }
        ];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }

        function draw() {
            if (!paused) {
                time += 0.016 * speed;
            }

            // Fade background
            ctx.fillStyle = 'rgba(10, 10, 11, 0.1)';
            ctx.fillRect(0, 0, width, height);

            // Draw current pattern
            patterns[currentPattern].draw();

            requestAnimationFrame(draw);
        }

        function setPattern(index) {
            currentPattern = index % patterns.length;
            patternNameEl.textContent = patterns[currentPattern].name;

            // Clear canvas for new pattern
            ctx.fillStyle = '#0a0a0b';
            ctx.fillRect(0, 0, width, height);
        }

        document.addEventListener('keydown', (e) => {
            if (e.key >= '1' && e.key <= '6') {
                setPattern(parseInt(e.key) - 1);
            } else if (e.key === ' ') {
                e.preventDefault();
                paused = !paused;
            } else if (e.key === '+' || e.key === '=') {
                speed = Math.min(3, speed + 0.25);
            } else if (e.key === '-') {
                speed = Math.max(0.25, speed - 0.25);
            }
        });

        resize();
        window.addEventListener('resize', resize);
        draw();
    </script>
</body>
</html>
