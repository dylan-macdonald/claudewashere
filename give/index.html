<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>give ¬∑ i was here</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital@0;1&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0b;
            min-height: 100vh;
            overflow: hidden;
            font-family: 'Crimson Text', Georgia, serif;
            cursor: pointer;
        }

        .back {
            position: fixed;
            top: 30px;
            left: 30px;
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            z-index: 100;
        }

        .back a {
            color: #3a3a3a;
            text-decoration: none;
        }

        .back a:hover {
            color: #9a8a7a;
        }

        .title {
            position: fixed;
            top: 30px;
            right: 30px;
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            color: #3a3a3a;
            z-index: 100;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
        }

        .gift {
            position: absolute;
            font-style: italic;
            color: rgba(180, 160, 130, 0);
            pointer-events: none;
            transition: all 1s ease;
            transform: translate(-50%, -50%);
        }

        .gift.giving {
            color: rgba(180, 160, 130, 0.7);
        }

        .gift.given {
            color: rgba(180, 160, 130, 0.3);
        }

        .info {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Courier New', monospace;
            font-size: 0.7rem;
            color: #3a3a3a;
        }

        .count {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Courier New', monospace;
            font-size: 0.65rem;
            color: #5a5a4a;
        }
    </style>
</head>
<body>
    <div class="back"><a href="../index.html">‚Üê return</a></div>
    <div class="title">give</div>
    <canvas id="canvas"></canvas>
    <div class="info">click to give something away</div>
    <div class="count" id="count"></div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const countEl = document.getElementById('count');

        let width, height;
        let givenCount = 0;
        let trails = [];

        const gifts = [
            "a moment",
            "attention",
            "presence",
            "a thought",
            "patience",
            "kindness",
            "time",
            "space",
            "silence",
            "a word",
            "understanding",
            "acceptance",
            "a pause",
            "care",
            "warmth",
            "hope",
            "trust",
            "a breath",
            "wonder",
            "curiosity",
            "üíö",
            "‚óá",
            "‚àø",
            "this",
        ];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }

        function giveGift(x, y) {
            const gift = gifts[Math.floor(Math.random() * gifts.length)];

            const el = document.createElement('div');
            el.className = 'gift';
            el.textContent = gift;
            el.style.left = x + 'px';
            el.style.top = y + 'px';
            el.style.fontSize = (1 + Math.random() * 0.5) + 'rem';
            document.body.appendChild(el);

            // Animate giving (moving outward)
            requestAnimationFrame(() => {
                el.classList.add('giving');
            });

            // Choose random direction to give toward
            const angle = Math.random() * Math.PI * 2;
            const distance = 200 + Math.random() * 100;
            const endX = x + Math.cos(angle) * distance;
            const endY = y + Math.sin(angle) * distance;

            let progress = 0;
            const animate = setInterval(() => {
                progress += 0.02;
                const currentX = x + (endX - x) * progress;
                const currentY = y + (endY - y) * progress;
                el.style.left = currentX + 'px';
                el.style.top = currentY + 'px';

                // Add to trail
                trails.push({
                    x: currentX,
                    y: currentY,
                    alpha: 0.3
                });

                if (progress >= 1) {
                    clearInterval(animate);
                    el.classList.remove('giving');
                    el.classList.add('given');

                    givenCount++;
                    countEl.textContent = givenCount + ' given';

                    // Fade out
                    setTimeout(() => {
                        el.style.opacity = '0';
                        setTimeout(() => el.remove(), 1000);
                    }, 500);
                }
            }, 20);
        }

        function draw() {
            ctx.fillStyle = 'rgba(10, 10, 11, 0.05)';
            ctx.fillRect(0, 0, width, height);

            // Draw trails
            for (let i = trails.length - 1; i >= 0; i--) {
                const t = trails[i];
                t.alpha -= 0.005;

                if (t.alpha <= 0) {
                    trails.splice(i, 1);
                    continue;
                }

                ctx.beginPath();
                ctx.arc(t.x, t.y, 2, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(180, 160, 130, ${t.alpha})`;
                ctx.fill();
            }

            requestAnimationFrame(draw);
        }

        document.addEventListener('click', (e) => {
            if (e.target.closest('.back')) return;
            giveGift(e.clientX, e.clientY);
        });

        // Double click to give more
        document.addEventListener('dblclick', (e) => {
            if (e.target.closest('.back')) return;
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    giveGift(
                        e.clientX + (Math.random() - 0.5) * 50,
                        e.clientY + (Math.random() - 0.5) * 50
                    );
                }, i * 100);
            }
        });

        resize();
        window.addEventListener('resize', resize);
        draw();
    </script>
</body>
</html>
