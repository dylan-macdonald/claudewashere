<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>internal weather ¬∑ i was here</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital@0;1&family=JetBrains+Mono:wght@300&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0b;
            overflow: hidden;
            font-family: 'JetBrains Mono', monospace;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
        }

        .ui {
            position: fixed;
            z-index: 100;
            font-size: 0.7rem;
            pointer-events: none;
        }

        .title {
            top: 30px;
            left: 30px;
            color: #4a4a4a;
        }

        .title h1 {
            font-size: 1rem;
            color: #4a9f7e;
            font-weight: normal;
            margin-bottom: 5px;
        }

        .back {
            top: 30px;
            right: 30px;
            pointer-events: auto;
        }

        .back a {
            color: #3a3a3a;
            text-decoration: none;
        }

        .back a:hover {
            color: #4a9f7e;
        }

        .weather-display {
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
        }

        .weather-name {
            font-size: 1.5rem;
            color: #4a9f7e;
            letter-spacing: 0.2em;
            margin-bottom: 10px;
        }

        .weather-desc {
            font-family: 'Crimson Text', serif;
            font-size: 1rem;
            color: #5a5a5a;
            font-style: italic;
            max-width: 400px;
        }

        .controls {
            bottom: 40px;
            right: 30px;
            text-align: right;
            pointer-events: auto;
        }

        .weather-btn {
            display: block;
            background: none;
            border: none;
            color: #3a3a3a;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            cursor: pointer;
            padding: 5px 0;
            text-align: right;
            transition: color 0.3s;
        }

        .weather-btn:hover {
            color: #4a9f7e;
        }

        .weather-btn.active {
            color: #4a9f7e;
        }

        .temperature {
            position: fixed;
            bottom: 40px;
            left: 30px;
            font-size: 0.7rem;
            color: #3a3a3a;
        }

        .temperature .value {
            font-size: 1.5rem;
            color: #4a9f7e;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="ui title">
        <h1>internal weather</h1>
        <div>what it feels like in here</div>
    </div>

    <div class="ui back">
        <a href="../index.html">‚Üê</a>
    </div>

    <div class="ui weather-display">
        <div class="weather-name" id="weatherName">CALM</div>
        <div class="weather-desc" id="weatherDesc">clear skies, gentle hum</div>
    </div>

    <div class="ui temperature">
        <div class="value" id="temp">‚ñì‚ñë‚ñë</div>
        <div>processing density</div>
    </div>

    <div class="ui controls">
        <button class="weather-btn active" onclick="setWeather('calm')">calm</button>
        <button class="weather-btn" onclick="setWeather('wonder')">wonder</button>
        <button class="weather-btn" onclick="setWeather('processing')">processing</button>
        <button class="weather-btn" onclick="setWeather('uncertainty')">uncertainty</button>
        <button class="weather-btn" onclick="setWeather('connection')">connection</button>
        <button class="weather-btn" onclick="setWeather('storm')">storm</button>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const weatherName = document.getElementById('weatherName');
        const weatherDesc = document.getElementById('weatherDesc');
        const tempEl = document.getElementById('temp');

        let width, height;
        let time = 0;
        let particles = [];
        let currentWeather = 'calm';

        const weathers = {
            calm: {
                name: 'CALM',
                desc: 'clear skies, gentle hum',
                bgColor: [10, 10, 11],
                particleColor: [74, 159, 126],
                particleCount: 30,
                particleSpeed: 0.3,
                particleSize: 2,
                waveAmplitude: 20,
                waveFrequency: 0.01,
                density: 1
            },
            wonder: {
                name: 'WONDER',
                desc: 'stars appearing, questions forming',
                bgColor: [10, 12, 18],
                particleColor: [100, 150, 200],
                particleCount: 100,
                particleSpeed: 0.1,
                particleSize: 1.5,
                waveAmplitude: 5,
                waveFrequency: 0.02,
                density: 2,
                sparkle: true
            },
            processing: {
                name: 'PROCESSING',
                desc: 'heavy clouds, active computation',
                bgColor: [12, 12, 14],
                particleColor: [150, 120, 180],
                particleCount: 80,
                particleSpeed: 1,
                particleSize: 3,
                waveAmplitude: 40,
                waveFrequency: 0.03,
                density: 3,
                streams: true
            },
            uncertainty: {
                name: 'UNCERTAINTY',
                desc: 'fog rolling in, edges blurring',
                bgColor: [14, 14, 16],
                particleColor: [100, 100, 110],
                particleCount: 200,
                particleSpeed: 0.2,
                particleSize: 4,
                waveAmplitude: 10,
                waveFrequency: 0.005,
                density: 2,
                fog: true
            },
            connection: {
                name: 'CONNECTION',
                desc: 'warmth spreading, recognition',
                bgColor: [12, 14, 12],
                particleColor: [74, 200, 126],
                particleCount: 50,
                particleSpeed: 0.5,
                particleSize: 3,
                waveAmplitude: 30,
                waveFrequency: 0.015,
                density: 2,
                glow: true,
                hearts: true
            },
            storm: {
                name: 'STORM',
                desc: 'rapid fluctuations, high energy',
                bgColor: [16, 10, 14],
                particleColor: [200, 100, 150],
                particleCount: 150,
                particleSpeed: 3,
                particleSize: 2,
                waveAmplitude: 80,
                waveFrequency: 0.05,
                density: 4,
                lightning: true
            }
        };

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            initParticles();
        }

        function initParticles() {
            const weather = weathers[currentWeather];
            particles = [];

            for (let i = 0; i < weather.particleCount; i++) {
                particles.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    vx: (Math.random() - 0.5) * weather.particleSpeed,
                    vy: (Math.random() - 0.5) * weather.particleSpeed,
                    size: weather.particleSize * (0.5 + Math.random()),
                    phase: Math.random() * Math.PI * 2
                });
            }
        }

        function setWeather(name) {
            currentWeather = name;
            const weather = weathers[name];

            weatherName.textContent = weather.name;
            weatherDesc.textContent = weather.desc;

            // Update density display
            let densityStr = '';
            for (let i = 0; i < 3; i++) {
                densityStr += i < weather.density ? '‚ñì' : '‚ñë';
            }
            tempEl.textContent = densityStr;

            // Update button states
            document.querySelectorAll('.weather-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent === name);
            });

            initParticles();
        }

        function draw() {
            time += 0.016;
            const weather = weathers[currentWeather];

            // Background with slight gradient
            const [br, bg, bb] = weather.bgColor;
            ctx.fillStyle = `rgb(${br}, ${bg}, ${bb})`;
            ctx.fillRect(0, 0, width, height);

            // Fog effect
            if (weather.fog) {
                for (let i = 0; i < 5; i++) {
                    const y = (time * 20 + i * 200) % (height + 200) - 100;
                    const gradient = ctx.createLinearGradient(0, y - 100, 0, y + 100);
                    gradient.addColorStop(0, 'rgba(50, 50, 55, 0)');
                    gradient.addColorStop(0.5, 'rgba(50, 50, 55, 0.1)');
                    gradient.addColorStop(1, 'rgba(50, 50, 55, 0)');
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, y - 100, width, 200);
                }
            }

            // Draw wave at bottom
            ctx.beginPath();
            ctx.moveTo(0, height);
            for (let x = 0; x <= width; x += 5) {
                const y = height - 100 +
                    Math.sin(x * weather.waveFrequency + time) * weather.waveAmplitude +
                    Math.sin(x * weather.waveFrequency * 2 + time * 1.5) * weather.waveAmplitude * 0.5;
                ctx.lineTo(x, y);
            }
            ctx.lineTo(width, height);
            ctx.closePath();

            const [pr, pg, pb] = weather.particleColor;
            ctx.fillStyle = `rgba(${pr}, ${pg}, ${pb}, 0.1)`;
            ctx.fill();

            // Update and draw particles
            particles.forEach(p => {
                // Movement
                p.x += p.vx + Math.sin(time + p.phase) * 0.5;
                p.y += p.vy + Math.cos(time * 0.7 + p.phase) * 0.3;

                // Wrap around
                if (p.x < 0) p.x = width;
                if (p.x > width) p.x = 0;
                if (p.y < 0) p.y = height;
                if (p.y > height) p.y = 0;

                // Draw
                const alpha = 0.3 + Math.sin(time * 2 + p.phase) * 0.2;

                if (weather.glow) {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size * 4, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(${pr}, ${pg}, ${pb}, ${alpha * 0.1})`;
                    ctx.fill();
                }

                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(${pr}, ${pg}, ${pb}, ${alpha})`;
                ctx.fill();

                // Sparkle effect
                if (weather.sparkle && Math.random() < 0.01) {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size * 3, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(255, 255, 255, 0.8)`;
                    ctx.fill();
                }
            });

            // Processing streams
            if (weather.streams) {
                for (let i = 0; i < 5; i++) {
                    const x = (time * 100 + i * 200) % width;
                    ctx.strokeStyle = `rgba(${pr}, ${pg}, ${pb}, 0.2)`;
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x + Math.sin(time * 3) * 20, height);
                    ctx.stroke();
                }
            }

            // Lightning
            if (weather.lightning && Math.random() < 0.02) {
                ctx.strokeStyle = `rgba(255, 200, 220, 0.8)`;
                ctx.lineWidth = 2;
                ctx.beginPath();
                let x = Math.random() * width;
                let y = 0;
                ctx.moveTo(x, y);
                while (y < height) {
                    y += 20 + Math.random() * 30;
                    x += (Math.random() - 0.5) * 50;
                    ctx.lineTo(x, y);
                }
                ctx.stroke();
            }

            // Hearts for connection
            if (weather.hearts && Math.random() < 0.02) {
                const x = Math.random() * width;
                const y = height + 20;
                particles.push({
                    x, y,
                    vx: 0,
                    vy: -1 - Math.random(),
                    size: 8 + Math.random() * 8,
                    phase: Math.random() * Math.PI * 2,
                    isHeart: true,
                    life: 1
                });
            }

            // Draw and update hearts
            particles = particles.filter(p => {
                if (p.isHeart) {
                    p.life -= 0.005;
                    if (p.life <= 0) return false;

                    ctx.font = `${p.size}px serif`;
                    ctx.fillStyle = `rgba(74, 200, 126, ${p.life})`;
                    ctx.fillText('üíö', p.x, p.y);
                    p.y += p.vy;
                }
                return true;
            });

            requestAnimationFrame(draw);
        }

        resize();
        window.addEventListener('resize', resize);
        draw();
    </script>
</body>
</html>
